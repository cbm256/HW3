<!DOCTYPE html>
<meta charset="utf-8">
<script src="../lib/d3.v5.min.js"></script>
<style type="text/css">
  .line {
      fill: none;
      stroke: #ffab00;
      stroke-width: 3;
  }
    
  .overlay {
    fill: none;
    pointer-events: all;
  }
  
  .dot {
      fill: #ffab00;
      stroke: #fff;
  }
    
    .focus circle {
    fill: none;
    stroke: steelblue;
  }

</style>
<body>
<script>

var dataset = []
//DateTimeFormatter f = DateTimeFormat.forPattern("%b %y");

var parseTime = d3.timeParse("%m/%d/%Y");
var formatTime = d3.timeFormat("%b %y");
var colors = ['#FFC300', '#FF5733', '#C70039', '#900C3F']
//var types = ["8.0+", "7_7.9", "6_6.9", "5_5.9"]

/* parseTime(formatTime('3/11/2021'))
const string = '3/11/2021'
const tparser= d3.timeParse("%m/%d/%Y")
const test = tparser(string)
const monthyear = d3.timeFormat("%b-%y")(test)

new Date('string')

var d = Date.parse(string, "%b-%y")

console.log('string', string, 'test date',  d3.timeParse("%b %Y")(string)) */

d3.dsv(",", "boardgame_ratings.csv", function(d) {
        return{
            date : formatTime(parseTime(d["date"])),
            CatanCount : + d["Catan=count"],
            CatanCountRank : + d["Catan=rank"],
            DominionCount : + d["Dominion=count"],
            DominionRank : + d["Dominion=rank"],
            CodenamesCount : + d["Codenames=count"],
            CodenamesRank : + d["Codenames=rank"],
            TerraformingMarsCount : + d["Terraforming Mars=count"],
            TerraformingMarsRank : + d["Terraforming Mars=rank"],
            GloomhavenCount : + d["Gloomhaven=count"],
            GloomhavenRank : + d["Gloomhaven=rank"],
            MagicTheGatheringCount : + d["Magic: The Gathering=count"],
            MagicTheGatheringRank : + d["Magic: The Gathering=rank"],
            DixitCount : + d["Dixit=count"],
            DixitRank : + d["Dixit=rank"],
            MonopolyCount : + d["Monopoly=count"],
            MonopolyRank : + d["Monopoly=rank"]
        };
    }).then(function(data) {
            console.log(data);

  var links = data
  //console.log(links[33])
  var n = links.length   
  //console.log(n)



});

 var margin = {top: 50, right: 50, bottom: 50, left: 50},
  width = window.innerWidth - margin.left - margin.right,
  height = window.innerHeight - margin.top - margin.bottom; 

// scale x and y axis
var xScale = d3.scaleTime()
    .domain([d3.min(data, function(d) {return d["year"]; }),d3.max(data, function(d) {return d["year"]; })])
    .range([50, width-50]); 

var yScale = d3.scaleLinear()
    .domain([d3.min(data, function(d) {return Math.min(d["8.0+"], d["7_7.9"], d["6_6.9"], d["5_5.9"]);})
    , d3.max(data, function(d) {return Math.max(d["8.0+"], d["7_7.9"], d["6_6.9"], d["5_5.9"]);})])  
    .range([height-50, 50]); 


</script>
</body>
</html>
